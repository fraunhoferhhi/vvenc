stages:
   - build

.build_only_template:
   stage: build
   script:
      - make disable-lto=1 all
   only:
      - web
      - schedules
      - merge_requests

.build_test_template:
   stage: build
   script:
      - make disable-lto=1 all
      - make disable-lto=1 test
   only:
      - web
      - schedules
      - merge_requests


build_gcc5_ubuntu1804:
   extends: .build_only_template
   variables:
     CC: gcc-5
     CXX: g++-5
   tags:
      - ubuntu1804

build_gcc6_ubuntu1804:
   extends: .build_only_template
   variables:
     CC: gcc-6
     CXX: g++-6
   tags:
      - ubuntu1804

build_gcc7_ubuntu2004:
   extends: .build_only_template
   variables:
     CC: gcc-7
     CXX: g++-7
   tags:
      - ubuntu2004

build_gcc8_ubuntu2004:
   extends: .build_only_template
   variables:
     CC: gcc-8
     CXX: g++-8
   tags:
      - ubuntu2004

build_gcc9_ubuntu2004:
   extends: .build_only_template
   variables:
     CC: gcc-9
     CXX: g++-9
   tags:
      - ubuntu2004

build_gcc10_ubuntu2004:
   extends: .build_only_template
   variables:
     CC: gcc-10
     CXX: g++-10
   tags:
      - ubuntu2004

build_clang7_ubuntu2004:
   extends: .build_only_template
   variables:
     CC: clang-7
     CXX: clang++-7
   tags:
      - ubuntu2004

build_clang8_ubuntu2004:
   extends: .build_only_template
   variables:
     CC: clang-8
     CXX: clang++-8
   tags:
      - ubuntu2004

build_clang9_ubuntu2004:
   extends: .build_only_template
   variables:
     CC: clang-9
     CXX: clang++-9
   tags:
      - ubuntu2004

build_clang10_ubuntu2004:
   extends: .build_only_template
   variables:
     CC: clang-10
     CXX: clang++-10
   tags:
      - ubuntu2004

test_ubuntu1804:
   extends: .build_test_template
   tags:
      - ubuntu1804

test_ubuntu2004:
   extends: .build_test_template
   tags:
      - ubuntu2004

test_vc191x:
   extends: .build_test_template
   tags:
      - vc191x

test_vc192x:
   extends: .build_test_template
   tags:
      - vc192x

test_macos:
   extends: .build_test_template
   tags:
      - macos
